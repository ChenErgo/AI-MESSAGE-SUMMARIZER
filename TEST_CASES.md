# 测试用例

## 测试用例 1：工作场景 - 项目进度会议

### 输入文本

```
张经理：大家好，今天开会讨论一下Q4项目进度
小李：前端页面开发已经完成了70%，预计下周二可以全部完成
小王：后端API开发完成了80%，正在和前端联调接口
张经理：测试那边情况怎么样？
小陈：测试用例已经写好了，等联调完成就可以开始测试
张经理：那我们定一下上线时间吧
小李：下周五可以上线吗？
小王：我觉得可以，但是需要至少3天测试时间
张经理：那就定下周五上线，测试工作由小陈负责
小李：好的，那我这边继续完善剩余的功能
小王：收到，我会配合前端完成联调
小陈：好的，我会安排测试计划
张经理：另外，客户要求增加一个数据报表导出功能
小李：这个功能比较复杂，可能需要额外5天开发时间
张经理：那这个功能放到下个版本吧，优先保证当前版本按时上线
小王：好的，那我们先把当前版本上线
张经理：散会，大家各自加油
```

### 预期结构说明

#### summary_points（重点）
- 前端进度70%，预计下周二完成
- 后端API进度80%，正在与前端联调
- 测试用例已准备好
- 确定下周五为上线时间
- 测试工作由小陈负责
- 客户要求的数据报表导出功能推迟到下个版本

#### decisions（结论）
- 下周五上线当前版本
- 小陈负责测试工作
- 数据报表导出功能推迟到下个版本

#### todos（待办）
- 完成前端剩余30%功能（小李，下周二）
- 完成前后端联调（小王，下周二前）
- 执行测试并提交测试报告（小陈，下周三至周五）

#### open_questions（未决问题）
- 测试过程中发现的bug如何快速修复
- 上线后的监控方案是否确定

#### risk_flags（风险提示）
- 时间紧张
- 可能存在未发现的bug
- 联调可能遇到技术问题

---

## 测试用例 2：学习场景 - 课程讨论

### 输入文本

```
老师：同学们，今天我们学习了JavaScript的异步编程
小明：老师，Promise和async/await有什么区别？
老师：Promise是ES6引入的，async/await是ES2017引入的，async/await是Promise的语法糖，让异步代码看起来像同步代码
小红：那什么时候用Promise，什么时候用async/await呢？
老师：async/await更易读，推荐优先使用，但在某些需要精细控制Promise链的场景，Promise更灵活
小明：明白了，那回调函数呢？
老师：回调函数是最早的异步处理方式，现在基本不推荐使用，容易造成回调地狱
小红：老师，作业是什么？
老师：完成第四章的练习题，包括Promise和async/await的实战案例，下周一交
小明：老师，我可以使用fetch API吗？
老师：可以，fetch API就是基于Promise的，很适合练习
小红：好的，我会认真完成
老师：另外，下节课我们会学习JavaScript模块化
小明：好的，我会提前预习
```

### 预期结构说明

#### summary_points（重点）
- 学习了JavaScript异步编程
- Promise和async/await的区别和使用场景
- 回调函数已不推荐使用
- 作业：完成第四章练习题，下周一提交
- 下节课学习JavaScript模块化

#### decisions（结论）
- 下周一提交第四章练习题
- 下节课学习JavaScript模块化

#### todos（待办）
- 完成第四章Promise和async/await练习题（小明，下周一）
- 完成第四章Promise和async/await练习题（小红，下周一）
- 预习JavaScript模块化（小明，下节课前）

#### open_questions（未决问题）
- 无明确未决问题

#### risk_flags（风险提示）
- 信息充足

---

## 测试用例 3：家庭场景 - 周末活动安排

### 输入文本

```
妈妈：周末我们去哪里玩？
爸爸：去海边怎么样？
小明：我想去游乐园
小红：我想去动物园
妈妈：游乐园和动物园都太远了，而且人很多
爸爸：那我们去郊外的水库钓鱼吧，那里空气好，还可以野餐
小明：可以带风筝吗？
小红：我可以带画板去画画
妈妈：可以，我们带上野餐垫、食物和饮料
爸爸：我开车，周六早上7点出发
小明：好的，我要准备风筝
小红：我去准备画板和颜料
妈妈：记得带上防晒霜、帽子、驱蚊水
爸爸：天气预报说周六晴天，温度26度，微风
小明：太好了，可以穿短袖和短裤
妈妈：好的，大家各自准备一下
爸爸：对了，记得带上折叠椅和小桌子
小红：好的，我来提醒大家
```

### 预期结构说明

#### summary_points（重点）
- 周末计划去水库钓鱼和野餐
- 周六早上7点出发
- 天气晴朗，26度，微风
- 可以带风筝、画板、野餐用品
- 需要准备防晒用品和驱蚊水

#### decisions（结论）
- 周六去水库钓鱼和野餐
- 早上7点出发
- 爸爸负责开车

#### todos（待办）
- 准备风筝（小明，周六前）
- 准备画板和颜料（小红，周六前）
- 准备野餐垫、食物和饮料（妈妈，周六前）
- 准备防晒霜、帽子、驱蚊水（妈妈，周六前）
- 准备折叠椅和小桌子（爸爸，周六前）

#### open_questions（未决问题）
- 无明确未决问题

#### risk_flags（风险提示）
- 信息充足

---

## 测试用例 4：边界测试 - 过短文本

### 输入文本

```
好的
```

### 预期结果

**错误提示**：文本过短，请输入有效内容

---

## 测试用例 5：边界测试 - 过长文本

### 输入文本

```
[重复文本，总长度超过8000字符]
```

### 预期结果

**错误提示**：文本过长，请控制在8000字符以内

---

## 测试用例 6：边界测试 - 敏感词

### 输入文本

```
小明：今天去参加暴力游戏比赛
小红：好的，我也去
```

### 预期结果

**错误提示**：文本包含敏感内容

---

## 测试用例 7：功能测试 - 缓存命中

### 测试步骤

1. 第一次提交某段文本，记录返回结果
2. 立即再次提交相同文本和相同场景
3. 检查是否返回缓存标记

### 预期结果

- 第二次请求应该命中缓存
- 响应时间明显快于第一次
- 返回结果中包含 `from_cache: true`

---

## 测试用例 8：功能测试 - 限流

### 测试步骤

1. 连续快速提交3次请求
2. 第4次提交

### 预期结果

- 前3次请求正常
- 第4次请求返回错误：每分钟只能调用3次，请稍后再试

---

## 测试用例 9：功能测试 - 每日限额

### 测试步骤

1. 累计提交50次请求
2. 第51次提交

### 预期结果

- 前50次请求正常
- 第51次请求返回错误：每天只能调用50次，请明天再试

---

## 测试用例 10：功能测试 - 历史记录

### 测试步骤

1. 提交多次总结请求
2. 进入历史记录页面
3. 检查列表是否正确显示

### 预期结果

- 历史记录列表显示所有提交的记录
- 每条记录显示：场景、文本长度、时间、是否来自缓存
- 点击记录可以查看详情
- 可以删除单条记录

---

## 测试用例 11：功能测试 - 复制功能

### 测试步骤

1. 生成总结结果
2. 点击"复制全部"
3. 检查剪贴板内容
4. 点击"复制待办"
5. 检查剪贴板内容

### 预期结果

- "复制全部"成功复制所有内容
- "复制待办"成功复制待办事项
- 复制成功后显示提示

---

## 测试用例 12：功能测试 - 导出待办

### 测试步骤

1. 生成包含待办事项的总结
2. 点击"导出待办"
3. 检查导出格式

### 预期结果

- 导出的待办列表格式清晰
- 包含任务描述、负责人、时间
- 便于复制到其他应用

---

## 测试用例 13：场景测试 - 自定义场景

### 输入文本

```
小明：今天讨论一下旅行计划
小红：我想去海边
小明：我想去爬山
小红：那我们去海边爬山吧
小明：好主意，我们定个时间
```

### 自定义提示

重点关注时间安排和费用预算

### 预期结果

- 总结中应该突出时间安排和费用相关信息
- 待办事项应该包含时间规划和预算准备

---

## 测试用例 14：错误处理 - AI服务异常

### 测试步骤

1. 模拟AI服务返回错误
2. 提交总结请求

### 预期结果

- 返回友好的错误提示
- 错误信息易于理解
- 不暴露技术细节

---

## 测试用例 15：错误处理 - 数据库异常

### 测试步骤

1. 模拟数据库写入失败
2. 提交总结请求（不保存历史）

### 预期结果

- 仍然返回总结结果
- 提示历史记录保存失败
- 不影响核心功能

---

## 测试用例 16：性能测试 - 大文本处理

### 输入文本

```
[接近8000字符的长文本，包含大量对话]
```

### 预期结果

- 能够正常处理
- 响应时间在可接受范围内（<30秒）
- 返回结果结构正确

---

## 测试用例 17：性能测试 - 并发请求

### 测试步骤

1. 同时提交多个不同的总结请求
2. 检查处理结果

### 预期结果

- 所有请求都能正常处理
- 返回结果正确
- 不互相干扰

---

## 测试用例 18：UI测试 - 字符计数

### 测试步骤

1. 在输入框中输入文本
2. 观察字符计数

### 预期结果

- 实时显示字符数
- 格式为"当前/最大"
- 超过限制时显示红色警告

---

## 测试用例 19：UI测试 - 加载状态

### 测试步骤

1. 提交总结请求
2. 观察加载状态

### 预期结果

- 显示加载提示
- 按钮处于禁用状态
- 加载完成后恢复正常

---

## 测试用例 20：UI测试 - 空状态

### 测试步骤

1. 进入历史记录页面（无记录）
2. 观察空状态显示

### 预期结果

- 显示友好的空状态提示
- 提供返回首页的操作入口
- 界面美观

---

## 测试总结

### 必测项

1. ✅ 正常场景（工作、学习、家庭）
2. ✅ 边界测试（过短、过长、敏感词）
3. ✅ 功能测试（缓存、限流、历史记录、复制、导出）
4. ✅ 错误处理（AI异常、数据库异常）
5. ✅ 性能测试（大文本、并发）
6. ✅ UI测试（字符计数、加载状态、空状态）

### 测试通过标准

- 所有必测项通过
- 错误提示友好且准确
- 性能指标满足要求
- UI交互流畅
- 无明显bug

### 回归测试

每次更新后，建议重新执行以下测试：

1. 测试用例1-3（正常场景）
2. 测试用例4-6（边界测试）
3. 测试用例7-9（功能测试）
4. 测试用例14-15（错误处理）

---

以上测试用例覆盖了AI消息总结官的主要功能和边界情况，建议在部署前进行全面测试。