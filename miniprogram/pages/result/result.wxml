<view class="container" wx:if="{{result}}">
  <!-- ç¼“å­˜æ ‡è®° -->
  <view class="cache-badge" wx:if="{{meta && meta.from_cache}}">
    <text>âš¡ æ¥è‡ªç¼“å­˜</text>
  </view>

  <!-- é‡ç‚¹ -->
  <view class="section" wx:if="{{result.summary_points && result.summary_points.length > 0}}">
    <view class="section-header">
      <text class="section-icon">ğŸ“Œ</text>
      <text class="section-title">é‡ç‚¹</text>
    </view>
    <view class="section-content">
      <view class="point" wx:for="{{result.summary_points}}" wx:key="index">
        <text class="point-marker">â€¢</text>
        <text class="point-text">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- ç»“è®º -->
  <view class="section" wx:if="{{result.decisions && result.decisions.length > 0}}">
    <view class="section-header">
      <text class="section-icon">âœ…</text>
      <text class="section-title">ç»“è®º</text>
    </view>
    <view class="section-content">
      <view class="decision" wx:for="{{result.decisions}}" wx:key="index">
        <text class="decision-marker">{{index + 1}}.</text>
        <text class="decision-text">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- å¾…åŠ -->
  <view class="section" wx:if="{{result.todos && result.todos.length > 0}}">
    <view class="section-header">
      <text class="section-icon">ğŸ“‹</text>
      <text class="section-title">å¾…åŠ</text>
    </view>
    <view class="section-content">
      <view class="todo" wx:for="{{result.todos}}" wx:key="index">
        <view class="todo-main">
          <text class="todo-marker">{{index + 1}}.</text>
          <text class="todo-task">{{item.task}}</text>
        </view>
        <view class="todo-meta">
          <text class="todo-owner" wx:if="{{item.owner_hint && item.owner_hint !== 'æœªæ˜ç¡®'}}">
            ğŸ‘¤ {{item.owner_hint}}
          </text>
          <text class="todo-due" wx:if="{{item.due_hint && item.due_hint !== 'æœªæ˜ç¡®'}}">
            ğŸ“… {{item.due_hint}}
          </text>
        </view>
      </view>
    </view>
  </view>

  <!-- æœªå†³é—®é¢˜ -->
  <view class="section" wx:if="{{result.open_questions && result.open_questions.length > 0}}">
    <view class="section-header">
      <text class="section-icon">â“</text>
      <text class="section-title">æœªå†³é—®é¢˜</text>
    </view>
    <view class="section-content">
      <view class="question" wx:for="{{result.open_questions}}" wx:key="index">
        <text class="question-marker">Q{{index + 1}}</text>
        <text class="question-text">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- é£é™©æç¤º -->
  <view class="section" wx:if="{{result.risk_flags && result.risk_flags.length > 0}}">
    <view class="section-header">
      <text class="section-icon">âš ï¸</text>
      <text class="section-title">é£é™©æç¤º</text>
    </view>
    <view class="section-content">
      <view class="risk-tags">
        <text class="risk-tag" wx:for="{{result.risk_flags}}" wx:key="index">
          {{item}}
        </text>
      </view>
    </view>
  </view>

  <!-- å…è´£å£°æ˜ -->
  <view class="disclaimer">
    <text class="disclaimer-icon">âš ï¸</text>
    <text class="disclaimer-text">{{result.disclaimer}}</text>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="actions">
    <button class="action-btn" bindtap="onCopyAll">
      <text class="btn-icon">ğŸ“‹</text>
      <text>å¤åˆ¶å…¨éƒ¨</text>
    </button>
    <button class="action-btn" bindtap="onCopyTodos" wx:if="{{result.todos && result.todos.length > 0}}">
      <text class="btn-icon">ğŸ“</text>
      <text>å¤åˆ¶å¾…åŠ</text>
    </button>
    <button class="action-btn" bindtap="onExportTodos" wx:if="{{result.todos && result.todos.length > 0}}">
      <text class="btn-icon">ğŸ“¤</text>
      <text>å¯¼å‡ºå¾…åŠ</text>
    </button>
    <button class="action-btn secondary" bindtap="onRegenerate">
      <text class="btn-icon">ğŸ”„</text>
      <text>é‡æ–°ç”Ÿæˆ</text>
    </button>
  </view>

  <!-- è¿”å›é¦–é¡µ -->
  <view class="back-home" bindtap="onBackToHome">
    <text>è¿”å›é¦–é¡µ</text>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading-container" wx:if="{{loading}}">
  <text>åŠ è½½ä¸­...</text>
</view>